# Modern Chat 安装向导

## 概述

Modern Chat 现已提供图形化安装向导，帮助您轻松完成系统配置和部署。

## 安装步骤

### 1. 上传文件

将 Modern Chat 所有文件上传到您的 Web 服务器（如 `/var/www/html/modern-chat`）。

### 2. 访问安装向导

在浏览器中访问您的网站域名，系统会自动检测安装状态：

- 如果未安装，会跳转到 `/install.php` 安装向导页面
- 如果已安装，会直接进入聊天系统

### 3. 按照向导完成配置

安装向导包含以下步骤：

#### 步骤 1: 欢迎
- 显示系统版本信息
- 了解安装流程

#### 步骤 2: 环境检测
自动检测以下环境要求：
- PHP 版本（>= 7.4.0）
- PDO 扩展
- PDO MySQL 扩展
- Mbstring 扩展
- GD 库（推荐）
- 目录权限（avatars、uploads、config）

#### 步骤 3: 数据库配置
填写以下信息：
- 数据库服务器地址（默认：localhost）
- 端口（默认：3306）
- 数据库名称（如：chat）
- 数据库用户名（如：root）
- 数据库密码

系统会自动：
- 测试数据库连接
- 创建数据库（如果不存在）
- 导入数据库表结构
- 更新配置文件

如果数据库中已存在表，会提示是否清空并重新导入。

#### 步骤 4: 完成
- 显示安装成功信息
- 提供后续操作指引
- 点击按钮进入聊天系统

### 4. 首次使用

安装完成后：
1. 访问 `login.php` 登录页面
2. 点击"注册"创建账户
3. **首次注册的用户将自动成为超级管理员**
4. 注册成功后即可登录使用

## 重新安装

如需重新安装系统：

1. 删除项目根目录下的 `installed.lock` 文件
2. 刷新浏览器，会自动跳转到安装向导
3. 按照向导重新配置

**注意：** 重新安装会清空数据库中的所有数据，请谨慎操作！

## Docker 部署

如果您使用 Docker 部署，请参考 [README_DOCKER.md](README_DOCKER.md) 文档，不需要运行安装向导。

## 环境要求

- PHP >= 7.4.0
- MySQL >= 5.7.0
- PDO 扩展
- PDO MySQL 扩展
- Mbstring 扩展
- GD 库（推荐，用于图片处理）
- Web 服务器（Apache/Nginx）

## 目录权限

确保以下目录具有写权限：
- `avatars/` - 头像存储
- `uploads/` - 文件上传
- `config/` - 配置文件

## 常见问题

### Q: 环境检测失败怎么办？
A: 请根据检测提示安装缺失的 PHP 扩展或设置正确的目录权限。

### Q: 数据库连接失败？
A: 请检查数据库配置是否正确，确保数据库用户具有创建数据库和表的权限。

### Q: 如何修改数据库配置？
A: 重新安装系统或在安装完成后手动编辑 `config.php` 文件。

### Q: 安装后无法登录？
A: 首次注册的用户自动成为管理员，请先注册账户。

### Q: 提示"数据库已存在数据表"？
A: 可以选择"是"清空数据库并重新导入，或修改数据库名称后重试。

## 技术支持

如有问题，请访问项目主页或提交 Issue。

## 安全建议

1. 安装完成后修改数据库密码
2. 使用强密码作为管理员账户
3. 定期备份数据库
4. 及时更新系统到最新版本

---

**感谢您使用 Modern Chat！**
